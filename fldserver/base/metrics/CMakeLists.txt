fldserver_cc_library(
        NAME
        metrics
        HDRS
        "bucket_ranges.h"
        "crc32.h"
        "dummy_histogram.h"
        "field_trial.h"
        "field_trial_param_associator.h"
        "field_trial_params.h"
        "histogram.h"
        "histogram_base.h"
        "histogram_delta_serialization.h"
        "histogram_flattener.h"
        "histogram_functions.h"
        "histogram_macros.h"
        "histogram_macros_internal.h"
        "histogram_macros_local.h"
        "histogram_samples.h"
        "histogram_snapshot_manager.h"
        "metrics_hashes.h"
        "persistent_histogram_allocator.h"
        "persistent_histogram_storage.h"
        "persistent_memory_allocator.h"
        "persistent_sample_map.h"
        "record_histogram_checker.h"
        "sample_map.h"
        "sample_vector.h"
        "single_sample_metrics.h"
        "sparse_histogram.h"
        "statistics_recorder.h"
        "user_metrics.h"
        "user_metrics_action.h"
        COPTS
        ${FLDSERVER_DEFAULT_COPTS}
        SRCS
        "bucket_ranges.cc"
        "crc32.cc"
        "dummy_histogram.cc"
        "field_trial.cc"
        "field_trial_param_associator.cc"
        "field_trial_params.cc"
        "histogram.cc"
        "histogram_base.cc"
        "histogram_delta_serialization.cc"
        "histogram_functions.cc"
        "histogram_samples.cc"
        "histogram_snapshot_manager.cc"
        "metrics_hashes.cc"
        "persistent_histogram_allocator.cc"
        "persistent_histogram_storage.cc"
        "persistent_memory_allocator.cc"
        "persistent_sample_map.cc"
        "sample_map.cc"
        "sample_vector.cc"
        "single_sample_metrics.cc"
        "sparse_histogram.cc"
        "statistics_recorder.cc"
        "user_metrics.cc"
        DEFINES
        DEPS
        Threads::Threads
        PUBLIC
        OBJECT_LIB
)